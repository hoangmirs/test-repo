name: Automatic workflow

on: push

jobs:
  greeting:
    runs-on: ubuntu-latest
    steps:
    - name: Greetings
      run: echo "Hello World!"
      
  deploy:
    name: Invoke deployment
    runs-on: ubuntu-latest
    needs: greeting
    if: contains(github.ref, 'refs/heads/development') || contains(github.ref, 'refs/heads/master')
    steps:
      - name: Invoke deployment workflow
        uses: benc-uk/workflow-dispatch@v1
        with:
          workflow: Manual workflow
          token: ${{ secrets.PERSONAL_TOKEN }}
          
